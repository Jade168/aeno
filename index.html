<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>AENO Civilization</title>
  <link rel="stylesheet" href="./style.css?v=2026-02-19" />
</head>
<body>

  <!-- GAME CANVAS (2D HUD overlay if needed) -->
  <canvas id="gameCanvas"></canvas>

  <!-- Boot Screen -->
  <div id="bootScreen">
    <div class="bootBox">
      <img src="./logo.png" alt="AENO Logo" />
      <h3>AENO Civilization</h3>

      <input id="loginUser" placeholder="用戶名 Username" />
      <input id="loginPass" placeholder="密碼 Password" type="password" />

      <button id="btnRegister">註冊 Register</button>
      <button id="btnLogin">登入 Login</button>

      <div style="margin-top:10px;">
        <button id="btnGuest">訪客模式 Guest</button>
      </div>

      <div id="loginMsg"></div>
      <div style="opacity:0.7;font-size:12px;margin-top:10px;">
        Version 2026-02-19
      </div>
    </div>
  </div>

  <!-- Planet Select -->
  <div id="planetSelect" class="hidden">
    <div class="bootBox">
      <h3>選擇出生星球</h3>
      <p style="opacity:0.8;font-size:13px;">
        選定後永久定居，未解放黑洞前不能移民。
      </p>

      <select id="planetPicker" style="width:92%;padding:10px;border-radius:10px;border:none;">
      </select>

      <button id="btnConfirmPlanet">確定 Confirm</button>
    </div>
  </div>

  <!-- Assistant UI -->
  <div id="assistant">
    <div id="assistantEmoji">🐱</div>
    <div style="flex:1;">
      <div id="assistantName">AENO</div>
      <div style="font-size:12px;opacity:0.8;">伴生AI · 粵語模式</div>
    </div>
    <button id="assistantTalkBtn">對話</button>
  </div>

  <!-- Chat Box -->
  <div id="chatBox" class="hidden">
    <div id="chatHeader">
      <b>🧠 AENO AI 對話</b>
      <span id="chatClose">✖</span>
    </div>
    <div id="chatLog"></div>
    <div id="chatInputRow">
      <input id="chatInput" placeholder="輸入指令：發音 / 巡邏 / 建造..." />
      <button id="chatSend">送出</button>
    </div>
  </div>

  <!-- Main Panel -->
  <div id="mainPanel">
    <div id="panelHeader">
      <b>🌍 AENO Panel</b>
      <div class="panelBtns">
        <button id="panelMinBtn">—</button>
        <button id="panelHideBtn">✖</button>
      </div>
    </div>

    <div id="tabs">
      <button class="tabBtn active" data-tab="tabStats">狀態</button>
      <button class="tabBtn" data-tab="tabBuild">建築</button>
      <button class="tabBtn" data-tab="tabRobots">機器人</button>
      <button class="tabBtn" data-tab="tabMarket">市集</button>
      <button class="tabBtn" data-tab="tabSystem">系統</button>
    </div>

    <!-- Stats -->
    <div id="tabStats" class="tabPage active">
      <div class="statRow"><span>星球</span><b id="planetName">?</b></div>
      <div class="statRow"><span>年份</span><b id="gameYear">0</b></div>
      <div class="statRow"><span>人口</span><b id="popCount">0</b></div>

      <hr style="opacity:0.2;" />

      <div class="statRow"><span>木材</span><b id="wood">0</b></div>
      <div class="statRow"><span>石頭</span><b id="stone">0</b></div>
      <div class="statRow"><span>鐵礦</span><b id="iron">0</b></div>
      <div class="statRow"><span>糧食</span><b id="food">0</b></div>

      <hr style="opacity:0.2;" />

      <div class="statRow"><span>金幣</span><b id="coins">0</b></div>
      <div class="statRow"><span>AENO</span><b id="aeno">0</b></div>

      <hr style="opacity:0.2;" />

      <div class="statRow"><span>房屋</span><b id="houseCount">0</b></div>
      <div class="statRow"><span>機器人</span><b id="robotCount">0</b></div>
    </div>

    <!-- Build -->
    <div id="tabBuild" class="tabPage">
      <div class="buildGrid">
        <button class="buildBtn" data-build="house">🏠 房屋</button>
        <button class="buildBtn" data-build="farm">🌾 農田</button>
        <button class="buildBtn" data-build="lumber">🪓 伐木</button>
        <button class="buildBtn" data-build="quarry">🪨 採石</button>
        <button class="buildBtn" data-build="mine">⛏️ 礦場</button>
        <button class="buildBtn" data-build="market">🏦 市集</button>
        <button class="buildBtn" data-build="wall">🛡️ 城牆</button>
        <button class="buildBtn" data-build="lab">🧬 研究</button>
      </div>

      <button class="actionBtn" id="btnBuildMode">建築模式 ON</button>
      <button class="smallBtn" id="btnCancelBuildMode">取消建築模式</button>

      <button class="actionBtn" id="btnUpgradeMode">升級模式 ON</button>
      <button class="smallBtn" id="btnCancelUpgradeMode">取消升級模式</button>
    </div>

    <!-- Robots -->
    <div id="tabRobots" class="tabPage">
      <button class="actionBtn" id="btnRobotSend">🚀 派出探索</button>
      <button class="smallBtn" id="btnRobotRecall">🛰️ 全部召回</button>

      <hr style="opacity:0.2;" />

      <button class="actionBtn" id="btnPronTest">📢 發音測試</button>

      <hr style="opacity:0.2;" />

      <button class="actionBtn" id="btnPlayAd">🎵 播放廣告歌</button>
      <button class="smallBtn" id="btnLoopAd">🔁 Loop: ON</button>
    </div>

    <!-- Market -->
    <div id="tabMarket" class="tabPage">
      <select id="marketItem" style="width:100%;padding:10px;border-radius:10px;border:none;">
        <option value="wood">木材</option>
        <option value="stone">石頭</option>
        <option value="iron">鐵礦</option>
        <option value="food">糧食</option>
      </select>

      <input id="marketAmount" type="number" value="10"
        style="width:94%;padding:10px;margin-top:8px;border-radius:10px;border:none;" />

      <button class="actionBtn" id="btnBuy">買入</button>
      <button class="smallBtn" id="btnSell">賣出</button>
    </div>

    <!-- System -->
    <div id="tabSystem" class="tabPage">
      <button class="actionBtn" id="btnAutoToggle">自動建造: ON</button>
      <button class="smallBtn" id="btnAutoStopNow">🛑 停止自動建造</button>

      <button class="actionBtn" id="btnSaveGame">💾 手動保存</button>
      <button class="smallBtn" id="btnResetGame">🗑️ 重置玩家</button>

      <div id="sysLog"></div>
    </div>

  </div>

  <!-- Restore Panel -->
  <button id="panelRestoreBtn" class="hidden"
    style="position:fixed;right:18px;top:18px;z-index:9;padding:12px;border-radius:14px;border:none;cursor:pointer;background:#38bdf8;color:#0b1220;font-weight:bold;">
    打開面板
  </button>

  <!-- Three Toggle -->
  <div id="threeToggle">💡 3D: ON</div>

  <!-- scripts -->
  <script src="./assistantData.js?v=2026-02-19"></script>

  <!-- Three.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

  <script src="./game.js?v=2026-02-19"></script>
</body>
</html>
