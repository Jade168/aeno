<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>AENO V3 (Mobile Cartoon - Canvas)</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #0b1020;
      overflow: hidden;
      font-family: Arial, "Microsoft JhengHei", "PingFang HK", sans-serif;
      touch-action: none;
      -webkit-user-select: none;
      user-select: none;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(#091224, #081018);
    }

    /* Small HUD top */
    #hudTop {
      position: fixed;
      top: 6px;
      left: 6px;
      right: 6px;
      display: flex;
      gap: 6px;
      justify-content: space-between;
      z-index: 50;
      pointer-events: none;
    }
    .hudBox {
      pointer-events: auto;
      background: rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.15);
      color: #fff;
      padding: 6px 8px;
      border-radius: 10px;
      font-size: 11px;
      line-height: 1.25em;
      backdrop-filter: blur(6px);
      max-width: 48vw;
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    }
    .hudRow {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }
    .pill {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 11px;
      white-space: nowrap;
    }

    /* Panel */
    #panel {
      position: fixed;
      right: 8px;
      bottom: 80px; /* avoid mobile nav bar */
      width: min(320px, 75vw);
      max-height: 25vh; /* <= 1/4 screen */
      background: rgba(10,14,20,0.85);
      border: 1px solid rgba(255,255,255,0.16);
      border-radius: 14px;
      color: #fff;
      z-index: 100;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      backdrop-filter: blur(10px);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      touch-action: none;
    }

    #panelHeader {
      padding: 8px 10px;
      font-size: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255,255,255,0.06);
      cursor: grab;
    }
    #panelHeader:active { cursor: grabbing; }

    #panelBody {
      padding: 8px 10px;
      overflow: auto;
      font-size: 11px;
    }

    .btnRow {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-top: 6px;
    }
    button {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.18);
      color: #fff;
      border-radius: 10px;
      padding: 6px 8px;
      font-size: 11px;
      cursor: pointer;
    }
    button:active { transform: scale(0.98); }

    #togglePanelBtn {
      position: fixed;
      right: 8px;
      bottom: 12px;
      z-index: 200;
      border-radius: 999px;
      padding: 10px 12px;
      font-size: 12px;
      background: rgba(0,0,0,0.6);
      border: 1px solid rgba(255,255,255,0.18);
      backdrop-filter: blur(8px);
      color: #fff;
    }

    /* Build Menu popup */
    #buildMenu {
      position: fixed;
      left: 50%;
      top: 55%;
      transform: translate(-50%, -50%);
      width: min(360px, 92vw);
      max-height: 55vh;
      background: rgba(0,0,0,0.82);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 16px;
      color: #fff;
      z-index: 300;
      display: none;
      overflow: hidden;
      box-shadow: 0 15px 40px rgba(0,0,0,0.45);
      backdrop-filter: blur(10px);
    }
    #buildMenuHeader {
      padding: 10px;
      font-size: 13px;
      background: rgba(255,255,255,0.06);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #buildMenuBody {
      padding: 10px;
      overflow: auto;
      font-size: 11px;
    }
    .buildItem {
      padding: 8px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      margin-bottom: 8px;
      background: rgba(255,255,255,0.04);
    }
    .buildItemTitle {
      font-size: 12px;
      font-weight: bold;
      margin-bottom: 4px;
    }
    .buildCost {
      opacity: 0.9;
      margin-bottom: 6px;
    }

    /* Chat bubble */
    #assistantChat {
      position: fixed;
      left: 10px;
      bottom: 85px;
      width: min(320px, 80vw);
      max-height: 22vh;
      background: rgba(0,0,0,0.72);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 14px;
      color: #fff;
      z-index: 250;
      overflow: hidden;
      display: none;
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    }
    #assistantChatHeader {
      padding: 8px 10px;
      font-size: 12px;
      background: rgba(255,255,255,0.06);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #assistantChatBody {
      padding: 8px 10px;
      font-size: 11px;
      overflow: auto;
      max-height: 12vh;
    }
    #assistantChatInputRow {
      display: flex;
      gap: 6px;
      padding: 8px 10px;
      border-top: 1px solid rgba(255,255,255,0.12);
    }
    #assistantInput {
      flex: 1;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color: #fff;
      padding: 6px 8px;
      font-size: 12px;
      outline: none;
    }

    /* Planet select */
    #planetSelect {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.82);
      z-index: 999;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: #fff;
      padding: 16px;
      backdrop-filter: blur(10px);
    }
    .planetCard {
      width: min(380px, 92vw);
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.06);
      margin-bottom: 10px;
    }
    .planetTitle {
      font-size: 14px;
      font-weight: bold;
      margin-bottom: 6px;
    }
    .planetDesc {
      font-size: 11px;
      opacity: 0.9;
      margin-bottom: 8px;
    }

    /* Login Overlay */
    #loginOverlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.93);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: #fff;
      padding: 20px;
    }
    .loginBox {
      width: min(360px, 90vw);
      background: rgba(20,25,40,0.9);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 16px;
      padding: 24px;
    }
    .loginBox h2 {
      text-align: center;
      margin-bottom: 16px;
      font-size: 16px;
    }
    .loginBox input {
      width: 100%;
      box-sizing: border-box;
      padding: 10px 12px;
      margin-bottom: 10px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.15);
      background: rgba(0,0,0,0.4);
      color: #fff;
      font-size: 14px;
    }
    .loginBox button {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      background: #4a6cf7;
      color: #fff;
      border: none;
      font-size: 14px;
      font-weight: bold;
    }
    .devNote {
      text-align: center;
      margin-top: 10px;
      font-size: 11px;
      opacity: 0.7;
    }

    /* tiny helper */
    .muted { opacity: 0.85; font-size: 10px; }
    .danger { color: #ff9aa2; }
    .ok { color: #a8ffb8; }
  </style>
</head>

<body>

<!-- ç™»å…¥ç•Œé¢ï¼ˆå¼·åˆ¶å¯†ç¢¼æ ¡é©—ï¼‰ -->
<div id="loginOverlay">
  <div class="loginBox">
    <h2>ğŸ” AENO ç™»å…¥</h2>
    <input type="text" id="loginID" placeholder="è¼¸å…¥ä½ çš„å¸³è™Ÿ">
    <input type="password" id="loginPwd" placeholder="è¼¸å…¥å¯†ç¢¼">
    <button id="loginBtn">é€²å…¥éŠæˆ²</button>
    <div class="devNote">é–‹ç™¼è€…ï¼šé˜¿å‹’é “</div>
  </div>
</div>

  <canvas id="game"></canvas>

  <div id="hudTop">
    <div class="hudBox" id="hudLeft">
      <div class="hudRow">
        <span class="pill">ğŸŒ <span id="planetName">?</span></span>
        <span class="pill">â±ï¸ <span id="gameYear">0</span> å¹´</span>
        <span class="pill">ğŸ‘¥ <span id="popCount">0</span></span>
      </div>
      <div class="hudRow" style="margin-top:4px;">
        <span class="pill">ğŸª™ é‡‘å¹£: <span id="coins">0</span></span>
        <span class="pill">ğŸŸ¡ AENO: <span id="aeno">0.0000</span></span>
      </div>
    </div>

    <div class="hudBox" id="hudRight">
      <div class="hudRow">
        <span class="pill">ğŸªµ æœ¨: <span id="wood">0</span></span>
        <span class="pill">ğŸª¨ çŸ³: <span id="stone">0</span></span>
        <span class="pill">â›ï¸ éµ: <span id="iron">0</span></span>
        <span class="pill">ğŸŒ¾ ç³§: <span id="food">0</span></span>
      </div>
      <div class="hudRow" style="margin-top:4px;">
        <span class="pill">âš™ï¸ å·¥å» : <span id="factoryCount">0</span></span>
        <span class="pill">ğŸ¤– æ©Ÿå™¨äºº: <span id="robotCount">0</span></span>
      </div>
    </div>
  </div>

  <button id="togglePanelBtn">ğŸ“Œ é¢æ¿</button>

  <div id="panel">
    <div id="panelHeader">
      <span>ğŸ“Œ æ§åˆ¶ä¸­å¿ƒ</span>
      <span>
        <button id="btnSave">ä¿å­˜</button>
        <button id="btnHidePanel">æ”¶èµ·</button>
      </span>
    </div>
    <div id="panelBody">
      <div><b>æç¤ºï¼š</b>é»ä½ é ˜åœŸç©ºåœ°å¯ä»¥å»ºç¯‰ã€‚</div>
      <div class="muted">Zoom: é›™æŒ‡ç¸®æ”¾ / æ»¾è¼ªã€‚æ‹–åœ°åœ–ï¼šä¸€æŒ‡æ‹–ã€‚</div>

      <div class="btnRow">
        <button id="btnBuildMode">ğŸ—ï¸ å»ºç¯‰æ¨¡å¼</button>
        <button id="btnUpgradeMode">â¬†ï¸ å‡ç´šæ¨¡å¼</button>
        <button id="btnAuto">ğŸ¤– è‡ªå‹•å»ºé€ : <span id="autoState">ON</span></button>
      </div>

      <div class="btnRow">
        <button id="btnAdSong">ğŸµ æ’­æ”¾å»£å‘Šæ­Œ</button>
        <button id="btnLoopSong">ğŸ” Loop: <span id="loopState">ON</span></button>
      </div>

      <div class="btnRow">
        <button id="btnRobotSend">ğŸš€ æ´¾æ©Ÿå™¨äººæ¢ç´¢</button>
        <button id="btnExchange">ğŸ¦ äº¤æ˜“æ‰€</button>
        <button id="btnTech">ğŸ§¬ ç§‘æŠ€æ¨¹</button>
      </div>

      <div style="margin-top:10px;">
        <b>AIåŠ©æ‰‹å„ªå…ˆé †åºï¼š</b>
        <div class="btnRow">
          <button class="prioBtn" data-prio="house">ğŸ  æˆ¿å±‹</button>
          <button class="prioBtn" data-prio="lumber">ğŸªµ ä¼æœ¨</button>
          <button class="prioBtn" data-prio="mine">â›ï¸ ç¤¦å ´</button>
          <button class="prioBtn" data-prio="farm">ğŸŒ¾ è¾²ç”°</button>
          <button class="prioBtn" data-prio="market">ğŸª å¸‚å ´</button>
        </div>
        <div class="muted">ç›®å‰å„ªå…ˆï¼š<span id="prioNow">ğŸ  æˆ¿å±‹</span></div>
      </div>

      <div style="margin-top:10px;">
        <b>ç³»çµ±è¨Šæ¯ï¼š</b>
        <div id="logBox" style="margin-top:6px; max-height: 8vh; overflow:auto; font-size: 11px; opacity:0.92;"></div>
      </div>
    </div>
  </div>

  <div id="buildMenu">
    <div id="buildMenuHeader">
      <span>ğŸ—ï¸ å»ºç¯‰é¸å–®</span>
      <button id="closeBuildMenu">é—œé–‰</button>
    </div>
    <div id="buildMenuBody"></div>
  </div>

  <div id="assistantChat">
    <div id="assistantChatHeader">
      <span>ğŸ¾ AENO AI åŠ©æ‰‹</span>
      <button id="closeChat">æ”¶èµ·</button>
    </div>
    <div id="assistantChatBody"></div>
    <div id="assistantChatInputRow">
      <input id="assistantInput" placeholder="è¼¸å…¥æŒ‡ä»¤ï¼šå·¡é‚ / æ”¶é›† / å»ºé€  / å‡ç´š..." />
      <button id="sendAssistant">é€å‡º</button>
    </div>
  </div>

  <div id="planetSelect">
    <div style="font-size:18px; font-weight:bold; margin-bottom:10px;">ğŸŒŒ AENO V3 é¸æ“‡æ˜Ÿçƒ</div>

    <div class="planetCard">
      <div class="planetTitle">ğŸŸ© Planet-01 ç¶ åŸæ˜Ÿ</div>
      <div class="planetDesc">æ£®æ—å¤šï¼Œé©åˆæ–°æ‰‹ã€‚æœ¨æç”¢å‡ºé«˜ã€‚</div>
      <button class="planetBtn" data-planet="Planet-01" data-seed="forest">é€²å…¥</button>
    </div>

    <div class="planetCard">
      <div class="planetTitle">ğŸŸ« Planet-02 å²©çŸ³æ˜Ÿ</div>
      <div class="planetDesc">çŸ³é ­å¤šï¼Œå»ºç¯‰æ›´å¿«ï¼Œåœ°å½¢å´å¶‡ã€‚</div>
      <button class="planetBtn" data-planet="Planet-02" data-seed="rock">é€²å…¥</button>
    </div>

    <div class="planetCard">
      <div class="planetTitle">âš™ï¸ Planet-03 å·¥æ¥­æ˜Ÿ</div>
      <div class="planetDesc">éµç¤¦å¤šï¼Œé©åˆæ©Ÿå™¨äººèˆ‡å·¥å» æ–‡æ˜ã€‚</div>
      <button class="planetBtn" data-planet="Planet-03" data-seed="iron">é€²å…¥</button>
    </div>

    <div class="planetCard">
      <div class="planetTitle">ğŸŒ¾ Planet-04 è¾²ç‰§æ˜Ÿ</div>
      <div class="planetDesc">ç³§é£Ÿè±å¯Œï¼Œäººå£æˆé•·å¿«ã€‚</div>
      <button class="planetBtn" data-planet="Planet-04" data-seed="farm">é€²å…¥</button>
    </div>

    <div class="planetCard" id="devBlackHoleCard" style="border-color: rgba(255,255,255,0.3); background: rgba(80,0,120,0.22); display:none;">
      <div class="planetTitle">ğŸ•³ï¸ é»‘æ´å­¤å³¶ï¼ˆDeveloper Islandï¼‰</div>
      <div class="planetDesc">ç‰¹æ®Šæ˜ŸåŸŸã€‚æœªä¾†ç§»æ°‘ç³»çµ±ã€ç”³è«‹åˆ¶åº¦æœƒç”±æ­¤é–‹å§‹ã€‚</div>
      <button class="planetBtn" data-planet="BlackHole-Island" data-seed="blackhole">é€²å…¥</button>
    </div>

    <div class="muted" style="margin-top:10px; text-align:center;">
      âš ï¸ éŠæˆ²æœƒè‡ªå‹•ä¿å­˜ã€‚æ›´æ–°ç‰ˆæœ¬å¾Œä»å¯ä¿ç•™é€²åº¦ã€‚<br/>
      éŸ³æ¨‚éœ€æ‰‹å‹•é»æ“Šæ’­æ”¾ï¼ˆæ‰‹æ©Ÿé™åˆ¶ï¼‰ã€‚
    </div>
  </div>

<!-- å¼•å…¥éŠæˆ²æ ¸å¿ƒJS -->
<script src="game.js"></script>
</body>
</html>
